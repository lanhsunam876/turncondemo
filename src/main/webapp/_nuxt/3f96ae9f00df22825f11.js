(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{293:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(47),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(14),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(161),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_2__);__webpack_exports__.a={data:function(){return{form:{name:"",date:""},data:[],status:!1,isWorkHisModalOpen:!1,isEditWorkHisModalOpen:!1,isCreateWorkHisModalOpen:!1,isLoginModalOpen:!1,workHis:[],selectedId:"",selectedWorkHisId:"",isLoginConfirm:!1,callbackAfterLogin:"",workHisForm:{id:"",name:"",money:0,free:!1},loginForm:{username:"",password:""}}},watch:{selectedId:function(e,t){this.selectWorkHis(e,t)},selectedWorkHisId:function(e,t){this.selectWorkHis(e,t)},data:function(e,t){var o=this;this.selectedId?this.workHis=this.data.filter(function(e){return e.id===o.selectedId})[0].workHis||[]:this.workHis=[]}},created:function(){this.getCookie("__hashed__")?this.getData():this.isLoginModalOpen=!0},methods:{getCookie:function(e){var t=("; "+document.cookie).split("; "+e+"=");if(2===t.length)return t.pop().split(";").shift()},removeCookie:function(e){document.cookie=e+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"},getData:function(){var e=this;this.$axios.get("/",{headers:{Authorization:"Basic "+this.getCookie("__hashed__")}}).then(function(t){t.data&&t.data.error?"notLogin"===t.data.error?e.$notify.error({title:"Error",message:"You are not login"}):"notAllow"===t.data.error&&e.$notify.error({title:"Error",message:"You are not allowed"}):(e.data=t.data.detail,e.status=t.data.status)}).catch(function(e){console.log("Something went wrong while calling API.",e)})},selectWorkHis:function(e,t){this.selectedId&&this.selectedWorkHisId?this.filterWorkHis():this.workHisForm={id:"",name:"",money:0,free:!1}},filterWorkHis:function(){var e=this,data=this.data.filter(function(t){return t.id===e.selectedId})[0];if(data&&data.workHis&&Array.isArray(data.workHis)){var t=data.workHis.filter(function(t){return t.id===e.selectedWorkHisId})[0];this.workHisForm=Object(_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__.a)({},t),this.workHisForm.free=!!+this.workHisForm.free}else this.workHisForm={id:"",name:"",money:0,free:!1}},openModalDelete:function(e){var t=this,o=e.id,r=e.name;this.selectedId=o,this.selectedWorkHisId="",this.$confirm("Are you sure want to delete this record with ID: ".concat(o," and Name: ").concat(r,"?"),"Confirm",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(function(){t.callbackAfterLogin="delete",t.openLoginModal(!0)}).catch(function(){})},openWorkHisModal:function(e){this.selectedId=e,this.selectedWorkHisId="",this.workHis=this.data.filter(function(t){return t.id===e})[0].workHis||[],this.isWorkHisModalOpen=!0},openModalEditWorkHis:function(e){this.selectedWorkHisId=e,this.filterWorkHis(),this.callbackAfterLogin="editWorkHis",this.isEditWorkHisModalOpen=!0},openModalDeleteWorkHis:function(e){var t=this,o=e.id,r=e.name;this.selectedWorkHisId=o,this.$confirm("Are you sure want to delete work his with ID: ".concat(o," and Name: ").concat(r,"?"),"Confirm",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(function(){t.callbackAfterLogin="deleteWorkHis",t.openLoginModal(!0)}).catch(function(){})},openModalCreateWorkHis:function(e){this.selectedId=e,this.selectedWorkHisId="",this.filterWorkHis(),this.workHisForm={id:"",name:"",money:0,free:!1},this.isCreateWorkHisModalOpen=!0},openLoginModal:function(e){this.loginForm={username:"",password:""},e||(this.callbackAfterLogin=""),this.isLoginModalOpen=!0},createWorkHis:function(){var e=this,t=this.selectedId,o=this.workHisForm,r=o.name,n=o.money,l=o.free;this.$axios.get("/addGroup/".concat(t,"/").concat(r,"/").concat(n,"/").concat(l?"1":"0"),{headers:{Authorization:"Basic "+this.getCookie("__hashed__")}}).then(function(t){t.data&&t.data.error?"notLogin"===t.data.error?e.$notify.error({title:"Error",message:"You are not login"}):"notAllow"===t.data.error&&e.$notify.error({title:"Error",message:"You are not allowed"}):(e.data=t.data.detail,e.status=t.data.status,e.isCreateWorkHisModalOpen=!1)}).catch(function(t){e.$notify.error({title:"Error",message:"Create work his failed"}),console.log("Something went wrong while calling API.",t)})},editWorkHis:function(){var e=this,t=this.selectedId,o=this.workHisForm,r=o.id,n=o.name,l=o.money,c=o.free;this.$axios.get("/upGroup/".concat(t,"/").concat(r,"/").concat(n,"/").concat(l,"/").concat(c?"1":"0"),{headers:{Authorization:"Basic "+this.getCookie("__hashed__")}}).then(function(t){t.data&&t.data.error?"notLogin"===t.data.error?e.$notify.error({title:"Error",message:"You are not login"}):"notAllow"===t.data.error&&e.$notify.error({title:"Error",message:"You are not allowed"}):(e.data=t.data.detail,e.status=t.data.status,e.isEditWorkHisModalOpen=!1)}).catch(function(t){e.$notify.error({title:"Error",message:"Edit work his failed"}),console.log("Something went wrong while calling API.",t)})},deleteWorkHis:function(){var e=this,t=this.selectedId,o=this.workHisForm.id;this.$axios.get("/delGroup/".concat(t,"/").concat(o),{headers:{Authorization:"Basic "+this.getCookie("__hashed__")}}).then(function(t){t.data&&t.data.error?"notLogin"===t.data.error?e.$notify.error({title:"Error",message:"You are not login"}):"notAllow"===t.data.error&&e.$notify.error({title:"Error",message:"You are not allowed"}):(e.data=t.data.detail,e.status=t.data.status)}).catch(function(t){e.$notify.error({title:"Error",message:"Delete work his failed"}),console.log("Something went wrong while calling API.",t)})},login:function login(){var _this9=this,hashed=btoa(this.loginForm.username+":"+this.loginForm.password);this.$axios.get("/login",{headers:{Authorization:"Basic "+hashed}}).then(function(res){res.data&&res.data.error?"loginFailed"===res.data.error?_this9.$notify.error({title:"Error",message:"Wrong username or password"}):"notLogin"===res.data.error?_this9.$notify.error({title:"Error",message:"You are not login"}):"notAllow"===res.data.error&&_this9.$notify.error({title:"Error",message:"You are not allowed"}):(_this9.callbackAfterLogin?(eval(_this9[_this9.callbackAfterLogin]()),_this9.isEditWorkHisModalOpen=!1):document.cookie="__hashed__="+hashed,_this9.data=res.data.detail,_this9.status=res.data.status,_this9.isLoginModalOpen=!1)}).catch(function(e){_this9.$notify.error({title:"Error",message:"Login failed"}),console.log("Something went wrong while calling API.",e)})},add:function(){var e=this;this.$axios.get("/addUser/".concat(this.form.name),{headers:{Authorization:"Basic "+this.getCookie("__hashed__")}}).then(function(t){t.data&&t.data.error?"notLogin"===t.data.error?e.$notify.error({title:"Error",message:"You are not login"}):"notAllow"===t.data.error?e.$notify.error({title:"Error",message:"You are not allowed"}):"sameName"===t.data.error&&e.$notify.error({title:"Error",message:"Duplicate name"}):(e.data=t.data.detail,e.status=t.data.status)}).catch(function(t){e.$notify.error({title:"Error",message:"Add user failed"}),console.log("Something went wrong while calling API.",t)})},search:function(){var e=this;this.$axios.get("/dummy/".concat(this.form.date),{headers:{Authorization:"Basic "+this.getCookie("__hashed__")}}).then(function(t){t.data&&t.data.error?"notLogin"===t.data.error?e.$notify.error({title:"Error",message:"You are not login"}):"notAllow"===t.data.error&&e.$notify.error({title:"Error",message:"You are not allowed"}):(e.data=t.data.detail,e.status=t.data.status)}).catch(function(t){e.$notify.error({title:"Error",message:"Search failed"}),console.log("Something went wrong while calling API.",t)})},delete:function(){var e=this,t=this.selectedId;this.$axios.get("/delete/".concat(t),{headers:{Authorization:"Basic "+this.getCookie("__hashed__")}}).then(function(t){t.data&&t.data.error?"notLogin"===t.data.error?e.$notify.error({title:"Error",message:"You are not login"}):"notAllow"===t.data.error&&e.$notify.error({title:"Error",message:"You are not allowed"}):(e.data=t.data.detail,e.status=t.data.status)}).catch(function(t){e.$notify.error({title:"Error",message:"Delete work his failed"}),console.log("Something went wrong while calling API.",t)})},changeStatus:function(e){var t=this;this.$axios.get("/changeStatus/".concat(e),{headers:{Authorization:"Basic "+this.getCookie("__hashed__")}}).then(function(e){e.data&&e.data.error?"notLogin"===e.data.error?t.$notify.error({title:"Error",message:"You are not login"}):"notAllow"===e.data.error&&t.$notify.error({title:"Error",message:"You are not allowed"}):(t.data=e.data.detail,t.status=e.data.status)}).catch(function(e){t.$notify.error({title:"Error",message:"Change status failed"}),console.log("Something went wrong while calling API.",e)})},changeWorking:function(e){var t=this;this.$axios.get("/changeWorking/".concat(e),{headers:{Authorization:"Basic "+this.getCookie("__hashed__")}}).then(function(e){e.data&&e.data.error?"notLogin"===e.data.error?t.$notify.error({title:"Error",message:"You are not login"}):"notAllow"===e.data.error&&t.$notify.error({title:"Error",message:"You are not allowed"}):(t.data=e.data.detail,t.status=e.data.status)}).catch(function(e){t.$notify.error({title:"Error",message:"Change working failed"}),console.log("Something went wrong while calling API.",e)})},logout:function(){var e=this;this.$confirm("Are you sure want to logout?","Logout",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(function(){e.data=[],e.status=!1,e.removeCookie("__hashed__"),e.openLoginModal()}).catch(function(){})}}}},294:function(e,t,o){"use strict";o.r(t);var r=o(293).a,n=o(37),component=Object(n.a)(r,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-row",[o("el-col",{attrs:{span:24}},[o("h1",[e._v("\n        Welcome to Turn Management\n        "),e.getCookie("__hashed__")?e._e():o("el-button",{attrs:{type:"text"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.openLoginModal()}}},[e._v("Login for detail")]),e._v(" "),e.getCookie("__hashed__")?o("el-button",{attrs:{type:"text"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.logout()}}},[e._v("Logout")]):e._e()],1)]),e._v(" "),o("el-col",{attrs:{span:24}},[o("el-form",{attrs:{inline:!0,model:e.form,"label-width":"120px"}},[o("el-form-item",{attrs:{label:"Employee Name",prop:"name"}},[o("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary",disabled:!e.form.name||!e.status},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.add()}}},[e._v("Login")])],1),e._v(" "),o("el-form-item",[o("el-date-picker",{attrs:{"value-format":"yy:MM:dd",type:"date",placeholder:"Pick a day"},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}})],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary",disabled:!e.form.date},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.search()}}},[e._v("Search")])],1)],1)],1),e._v(" "),o("el-col",[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.data,stripe:""}},[o("el-table-column",{attrs:{prop:"id",label:"No",width:"50"}}),e._v(" "),o("el-table-column",{attrs:{prop:"name",label:"Employee"}}),e._v(" "),o("el-table-column",{attrs:{prop:"turn",label:"Total turn"}}),e._v(" "),o("el-table-column",{attrs:{prop:"turnAll",label:"Total"}}),e._v(" "),o("el-table-column",{attrs:{align:"center","header-align":"center",prop:"status",label:"Status"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text",disabled:!e.status},on:{click:function(o){return o.stopPropagation(),o.preventDefault(),e.changeStatus(t.row.id)}}},[e._v(e._s(+t.row.status?"Active":"Inactive"))])]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"loginTime",label:"Login time"}}),e._v(" "),o("el-table-column",{attrs:{align:"center","header-align":"center",label:"Turn list",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"primary"},on:{click:function(o){return o.stopPropagation(),o.preventDefault(),e.openWorkHisModal(t.row.id)}}},[e._v("View turn")])]}}])}),e._v(" "),o("el-table-column",{attrs:{align:"center","header-align":"center",label:"Add turn",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"primary",disabled:!e.status},on:{click:function(o){return o.stopPropagation(),o.preventDefault(),e.openModalCreateWorkHis(t.row.id)}}},[e._v("Add turn")])]}}])}),e._v(" "),o("el-table-column",{attrs:{align:"center","header-align":"center",prop:"working",label:"Working"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text",disabled:!e.status},on:{click:function(o){return o.stopPropagation(),o.preventDefault(),e.changeWorking(t.row.id)}}},[e._v(e._s(+t.row.working?"Working":"Free"))])]}}])}),e._v(" "),o("el-table-column",{attrs:{align:"center","header-align":"center",label:"Action",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"danger",disabled:!e.status},on:{click:function(o){return o.stopPropagation(),o.preventDefault(),e.openModalDelete(t.row)}}},[e._v("Delete")])]}}])})],1)],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"Work his",visible:e.isWorkHisModalOpen},on:{"update:visible":function(t){e.isWorkHisModalOpen=t}}},[o("el-table",{attrs:{data:e.workHis}},[o("el-table-column",{attrs:{property:"name",label:"Name"}}),e._v(" "),o("el-table-column",{attrs:{property:"free",formatter:function(e,col,t,o){return+t?"Free":"Count"},label:"Free",width:"200"}}),e._v(" "),o("el-table-column",{attrs:{property:"money",label:"Money"}}),e._v(" "),o("el-table-column",{attrs:{label:"Action"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text",disabled:!e.status},on:{click:function(o){return o.stopPropagation(),o.preventDefault(),e.openModalEditWorkHis(t.row.id)}}},[e._v("Edit")]),e._v(" "),o("el-button",{attrs:{type:"text",disabled:!e.status},on:{click:function(o){return o.stopPropagation(),o.preventDefault(),e.openModalDeleteWorkHis(t.row)}}},[e._v("Delete")])]}}])})],1),e._v(" "),o("el-dialog",{attrs:{width:"30%",visible:e.isEditWorkHisModalOpen,"append-to-body":""},on:{"update:visible":function(t){e.isEditWorkHisModalOpen=t}}},[o("el-form",{ref:"workHisForm",attrs:{model:e.workHisForm,"label-width":"120px"}},[o("el-form-item",{attrs:{label:"Name"}},[o("el-select",{model:{value:e.workHisForm.name,callback:function(t){e.$set(e.workHisForm,"name",t)},expression:"workHisForm.name"}},[o("el-option",{attrs:{label:"a",value:"a"}}),e._v(" "),o("el-option",{attrs:{label:"b",value:"b"}}),e._v(" "),o("el-option",{attrs:{label:"c",value:"c"}})],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"Money"}},[o("el-input-number",{model:{value:e.workHisForm.money,callback:function(t){e.$set(e.workHisForm,"money",t)},expression:"workHisForm.money"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"Free"}},[o("el-checkbox",{model:{value:e.workHisForm.free,callback:function(t){e.$set(e.workHisForm,"free",t)},expression:"workHisForm.free"}})],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary",disabled:!e.workHisForm.name},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.openLoginModal(!0)}}},[e._v("Update")]),e._v(" "),o("el-button",{on:{click:function(t){t.stopPropagation(),t.preventDefault(),e.isEditWorkHisModalOpen=!1}}},[e._v("Cancel")])],1)],1)],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"Create work his",visible:e.isCreateWorkHisModalOpen},on:{"update:visible":function(t){e.isCreateWorkHisModalOpen=t}}},[o("el-form",{ref:"workHisForm",attrs:{model:e.workHisForm,"label-width":"120px"}},[o("el-form-item",{attrs:{label:"Name"}},[o("el-select",{model:{value:e.workHisForm.name,callback:function(t){e.$set(e.workHisForm,"name",t)},expression:"workHisForm.name"}},[o("el-option",{attrs:{label:"a",value:"a"}}),e._v(" "),o("el-option",{attrs:{label:"b",value:"b"}}),e._v(" "),o("el-option",{attrs:{label:"c",value:"c"}})],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"Money"}},[o("el-input-number",{model:{value:e.workHisForm.money,callback:function(t){e.$set(e.workHisForm,"money",t)},expression:"workHisForm.money"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"Free"}},[o("el-checkbox",{model:{value:e.workHisForm.free,callback:function(t){e.$set(e.workHisForm,"free",t)},expression:"workHisForm.free"}})],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary",disabled:!e.workHisForm.name},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.createWorkHis()}}},[e._v("Create")]),e._v(" "),o("el-button",{on:{click:function(t){t.stopPropagation(),t.preventDefault(),e.isCreateWorkHisModalOpen=!1}}},[e._v("Cancel")])],1)],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"Login",visible:e.isLoginModalOpen},on:{"update:visible":function(t){e.isLoginModalOpen=t}}},[o("el-form",{ref:"loginForm",attrs:{model:e.loginForm,"label-width":"120px"}},[o("el-form-item",{attrs:{label:"Username"}},[o("el-input",{model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"Password"}},[o("el-input",{attrs:{"show-password":""},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary",disabled:!e.loginForm.username||!e.loginForm.password},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.login()}}},[e._v("Login")]),e._v(" "),o("el-button",{on:{click:function(t){t.stopPropagation(),t.preventDefault(),e.isLoginModalOpen=!1}}},[e._v("Cancel")])],1)],1)],1)],1)},[],!1,null,null,null);t.default=component.exports}}]);